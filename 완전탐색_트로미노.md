```python 
"""
문제. 코드트리 intermediate low
n * m크기의 이차원 영역의 각 위치에 자연수가 하나씩 적혀있다.
이 때 아래의 그림에 2가지 종류의 블럭 중 한 개를 블럭이 격자를 벗어나지 않도록
적당히 올려놓아 블럭이 놓인 칸 안에 적힌 숫자의 합이 최대가 될 때의
결과를 출력해라.
단, 주어진 블럭은 자유롭게 회전하거나 뒤집을 수 있다.

입력.
첫번째 줄 : n, m (3 ≤ n, m ≤ 200)
두번째 줄 : 각 행의 숫자 (1 ≤ 자연수 ≤ 1,000)

출력.
블럭 안에 적힌 숫자합의 최대값 출력

아이디어. 
가능한 모양을 3*3격자로 표현하여 리스트에 담아준다. 

"""

n, m = tuple(map(int, input().split()))
grid = [
    list(map(int, input().split()))
    for _ in range(n)
]

# 왜 3*3인지
shapes = [
    [[1, 1, 0],
     [1, 0, 0],
     [0, 0, 0]],

    [[1, 1, 0],
     [0, 1, 0],
     [0, 0, 0]],

    [[1, 0, 0],
     [1, 1, 0],
     [0, 0, 0]],

    [[0, 1, 0],
     [1, 1, 0],
     [0, 0, 0]],

    [[1, 1, 1],
     [0, 0, 0],
     [0, 0, 0]],

    [[1, 0, 0],
     [1, 0, 0],
     [1, 0, 0]],
]


def get_max_sum(x, y):
    max_sum = 0
    for i in range(6):
        is_possible = True
        sum_of_nums = 0
        for dx in range(0, 3):
            for dy in range(0, 3):
                if shapes[i][dx][dy] == 0:
                    continue
                if x + dx >= n or y + dy >= m:
                    is_possible = False
                else:
                    sum_of_nums += grid[x + dx][y + dy]

        if is_possible:
            max_sum = max(max_sum, sum_of_nums)

    return max_sum


ans = 0

for i in range(n):
    for j in range(m):
        ans = max(ans, get_max_sum(i, j))

print(ans)
```





































